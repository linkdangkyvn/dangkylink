<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link Unlocker Pro</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* --- C·∫§U H√åNH GIAO DI·ªÜN --- */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #e9eff1; margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; }
        .container { background: white; width: 90%; max-width: 480px; padding: 25px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); text-align: center; position: relative; overflow: hidden; }
        
        /* Chuy·ªÉn c·∫£nh */
        .step { display: none; animation: slideUp 0.4s ease-out; }
        .step.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        h2 { color: #2c3e50; margin-bottom: 5px; font-size: 20px; font-weight: 700; }
        p { color: #7f8c8d; font-size: 14px; margin-bottom: 20px; }

        /* --- C√ÅC LO·∫†I N√öT B·∫§M --- */
        .btn { display: flex; align-items: center; justify-content: space-between; padding: 16px 20px; margin: 12px 0; border-radius: 50px; text-decoration: none; font-weight: 600; font-size: 15px; transition: all 0.2s; cursor: pointer; border: none; width: 100%; box-sizing: border-box; position: relative; overflow: hidden; }
        
        /* Hi·ªáu ·ª©ng nh·∫•n (Click effect) */
        .btn:active { transform: scale(0.96); box-shadow: inset 0 3px 5px rgba(0,0,0,0.1); }
        
        /* M√†u s·∫Øc t·ª´ng lo·∫°i n√∫t */
        .btn-yt { background: #ff0000; color: white; box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3); }
        .btn-yt:hover { background: #d50000; }
        
        .btn-zalo { background: #0068ff; color: white; box-shadow: 0 4px 15px rgba(0, 104, 255, 0.3); }
        .btn-ads { background: #f39c12; color: white; box-shadow: 0 4px 15px rgba(243, 156, 18, 0.3); }

        /* Tr·∫°ng th√°i LOADING v√† DONE */
        .btn.loading { background: #95a5a6; pointer-events: none; justify-content: center; }
        .btn.done { background: #27ae60; color: white; pointer-events: none; box-shadow: none; border: 2px solid #27ae60; }

        /* N√∫t NEXT (M·∫∑c ƒë·ªãnh kh√≥a) */
        .btn-next { background: #bdc3c7; color: #fff; pointer-events: none; justify-content: center; margin-top: 25px; border-radius: 8px; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; }
        
        /* N√∫t NEXT (Khi m·ªü kh√≥a) */
        .btn-next.unlocked { background: linear-gradient(135deg, #11998e, #38ef7d); cursor: pointer; pointer-events: auto; box-shadow: 0 5px 20px rgba(46, 204, 113, 0.4); animation: pulse 2s infinite; }
        
        .btn-final { background: linear-gradient(135deg, #2980b9, #6dd5fa); color: white; justify-content: center; font-size: 18px; text-transform: uppercase; box-shadow: 0 5px 20px rgba(41, 128, 185, 0.4); }

        /* THANH TI·∫æN TR√åNH */
        .progress-bg { background: #f1f2f6; height: 8px; border-radius: 10px; margin: 0 0 25px 0; overflow: hidden; }
        .progress-bar { height: 100%; background: linear-gradient(90deg, #ff9966, #ff5e62); width: 0%; transition: width 0.5s ease; border-radius: 10px; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.02); } 100% { transform: scale(1); } }
        .spinner { border: 3px solid rgba(255,255,255,0.3); border-radius: 50%; border-top: 3px solid white; width: 16px; height: 16px; animation: spin 1s linear infinite; margin-right: 10px; display: none; }
        .btn.loading .spinner { display: inline-block; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .icon-left { width: 25px; text-align: center; margin-right: 10px; }
    </style>
</head>
<body>

    <div class="container">
        <div class="progress-bg">
            <div class="progress-bar" id="myBar"></div>
        </div>

        <div id="step1" class="step active">
            <div style="font-size: 50px; margin-bottom: 15px;">üöÄ</div>
            <h2>B·∫Øt ƒê·∫ßu / Start</h2>
            <p>Ho√†n th√†nh c√°c b∆∞·ªõc ƒë∆°n gi·∫£n ƒë·ªÉ l·∫•y link.</p>
            <button class="btn btn-final" onclick="chuyenTrang(2)" style="background: #34495e;">
                B·∫ÆT ƒê·∫¶U NGAY <i class="fas fa-arrow-right" style="margin-left:10px"></i>
            </button>
        </div>

        <div id="step2" class="step">
            <h2>B∆∞·ªõc 1/4</h2>
            <p>ƒêƒÉng k√Ω c√°c k√™nh b√™n d∆∞·ªõi</p>
            
            <a href="https://www.youtube.com/channel/ID_KENH_1?sub_confirmation=1" target="_blank" class="btn btn-yt" onclick="xuLyNhiemVu(this, 2)">
                <div class="content-wrapper"><i class="fab fa-youtube icon-left"></i> <span>ƒêƒÉng K√Ω K√™nh 1</span></div>
                <div class="spinner"></div> <i class="fas fa-chevron-right arrow-icon"></i>
            </a>
            
            <a href="https://www.youtube.com/channel/ID_KENH_2?sub_confirmation=1" target="_blank" class="btn btn-yt" onclick="xuLyNhiemVu(this, 2)">
                <div class="content-wrapper"><i class="fab fa-youtube icon-left"></i> <span>ƒêƒÉng K√Ω K√™nh 2</span></div>
                <div class="spinner"></div> <i class="fas fa-chevron-right arrow-icon"></i>
            </a>

            <button id="btn-next-2" class="btn btn-next" onclick="chuyenTrang(3)" data-required="2" data-done="0">
                <i class="fas fa-lock"></i> &nbsp; Kh√≥a (Ho√†n th√†nh 0/2)
            </button>
        </div>

        <div id="step3" class="step">
            <h2>B∆∞·ªõc 2/4</h2>
            <p>·ª¶ng h·ªô th√™m k√™nh ph·ª•</p>
            
            <a href="https://www.youtube.com/channel/ID_KENH_3?sub_confirmation=1" target="_blank" class="btn btn-yt" onclick="xuLyNhiemVu(this, 3)">
                <div class="content-wrapper"><i class="fab fa-youtube icon-left"></i> <span>ƒêƒÉng K√Ω K√™nh 3</span></div>
                <div class="spinner"></div> <i class="fas fa-chevron-right arrow-icon"></i>
            </a>
            
            <a href="https://www.youtube.com/channel/ID_KENH_4?sub_confirmation=1" target="_blank" class="btn btn-yt" onclick="xuLyNhiemVu(this, 3)">
                <div class="content-wrapper"><i class="fab fa-youtube icon-left"></i> <span>ƒêƒÉng K√Ω K√™nh 4</span></div>
                <div class="spinner"></div> <i class="fas fa-chevron-right arrow-icon"></i>
            </a>

            <button id="btn-next-3" class="btn btn-next" onclick="chuyenTrang(4)" data-required="2" data-done="0">
                <i class="fas fa-lock"></i> &nbsp; Kh√≥a (Ho√†n th√†nh 0/2)
            </button>
        </div>

        <div id="step4" class="step">
            <h2>B∆∞·ªõc 3/4</h2>
            <p>Tham gia nh√≥m & X√°c minh</p>
            
            <a href="https://zalo.me/g/LINK_NHOM" target="_blank" class="btn btn-zalo" onclick="xuLyNhiemVu(this, 4)">
                <div class="content-wrapper"><i class="fas fa-users icon-left"></i> <span>Tham gia Zalo</span></div>
                <div class="spinner"></div> <i class="fas fa-chevron-right arrow-icon"></i>
            </a>
            
            <a href="LINK_DIRECT_ADSTERRA" target="_blank" class="btn btn-ads" onclick="xuLyNhiemVu(this, 4)">
                <div class="content-wrapper"><i class="fas fa-star icon-left"></i> <span>Click Qu·∫£ng C√°o</span></div>
                <div class="spinner"></div> <i class="fas fa-external-link-alt arrow-icon"></i>
            </a>

            <button id="btn-next-4" class="btn btn-next" onclick="chuyenTrang(5)" data-required="2" data-done="0">
                <i class="fas fa-lock"></i> &nbsp; Kh√≥a (Ho√†n th√†nh 0/2)
            </button>
        </div>

        <div id="step5" class="step">
            <div style="font-size: 50px; margin-bottom: 15px; color: #27ae60;">üéâ</div>
            <h2>Th√†nh C√¥ng!</h2>
            <p>C·∫£m ∆°n b·∫°n ƒë√£ ·ªßng h·ªô.</p>
            
            <a href="#" id="finalLink" class="btn btn-final">
                <i class="fas fa-download"></i> &nbsp; T·∫¢I XU·ªêNG NGAY
            </a>
        </div>
    </div>

    <script>
        // X·ª¨ L√ù KHI B·∫§M N√öT NHI·ªÜM V·ª§
        function xuLyNhiemVu(element, stepIndex) {
            // N·∫øu n√∫t ƒë√£ xong r·ªìi th√¨ kh√¥ng l√†m g√¨ c·∫£
            if (element.classList.contains('done') || element.classList.contains('loading')) return;

            // 1. Chuy·ªÉn sang tr·∫°ng th√°i Loading
            element.classList.add('loading');
            let originalText = element.querySelector('span').innerText;
            element.querySelector('span').innerText = "ƒêang ki·ªÉm tra...";
            element.querySelector('.arrow-icon').style.display = 'none';

            // 2. ƒê·∫øm ng∆∞·ª£c 3 gi√¢y
            setTimeout(function() {
                // 3. Chuy·ªÉn sang tr·∫°ng th√°i Done
                element.classList.remove('loading');
                element.classList.add('done');
                
                // ƒê·ªïi giao di·ªán n√∫t th√†nh c√¥ng
                element.innerHTML = '<i class="fas fa-check-circle"></i> &nbsp; ƒê√£ ho√†n th√†nh';
                
                // 4. Ki·ªÉm tra n√∫t Next c·ªßa trang hi·ªán t·∫°i
                kiemTraNutNext(stepIndex);
            }, 3000); // 3 gi√¢y
        }

        // KI·ªÇM TRA ƒê·ªÇ M·ªû KH√ìA N√öT NEXT
        function kiemTraNutNext(stepIndex) {
            let nextBtn = document.getElementById('btn-next-' + stepIndex);
            
            // L·∫•y s·ªë nhi·ªám v·ª• c·∫ßn l√†m v√† s·ªë ƒë√£ l√†m
            let required = parseInt(nextBtn.getAttribute('data-required'));
            let done = parseInt(nextBtn.getAttribute('data-done')) + 1;
            
            // C·∫≠p nh·∫≠t l·∫°i s·ªë ƒë√£ l√†m v√†o code
            nextBtn.setAttribute('data-done', done);
            nextBtn.innerHTML = `<i class="fas fa-lock"></i> &nbsp; Kh√≥a (Ho√†n th√†nh ${done}/${required})`;

            // N·∫øu ƒë√£ l√†m ƒë·ªß nhi·ªám v·ª• -> M·ªü kh√≥a
            if (done >= required) {
                nextBtn.classList.add('unlocked');
                nextBtn.innerHTML = `TI·∫æP T·ª§C &nbsp; <i class="fas fa-arrow-right"></i>`;
            }
        }

        function chuyenTrang(soTrang) {
            // ·∫®n t·∫•t c·∫£ step
            document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
            // Hi·ªán step c·∫ßn ƒë·∫øn
            document.getElementById('step' + soTrang).classList.add('active');
            
            // C·∫≠p nh·∫≠t thanh ti·∫øn tr√¨nh
            let phanTram = (soTrang - 1) * 25; 
            document.getElementById("myBar").style.width = phanTram + "%";
        }

        // L·∫§Y LINK T·ª™ URL
        const params = new URLSearchParams(window.location.search);
        const linkGoc = params.get('link'); // D√πng ?link=...
        const idGoc = params.get('id'); // Ho·∫∑c d√πng ?id=... (Base64)

        if (idGoc) {
            try {
                document.getElementById("finalLink").href = atob(idGoc);
            } catch(e) { console.log(e); }
        } else if (linkGoc) {
            document.getElementById("finalLink").href = linkGoc;
        } else {
            document.getElementById("finalLink").href = "https://google.com";
        }
    </script>

</body>
</html>
