<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Tool V3.2 - Final UI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* C·∫§U H√åNH CHUNG */
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
        }

        /* TH·∫∫ CARD CH√çNH */
        .card { 
            background: white; 
            padding: 40px 30px; 
            border-radius: 20px; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.1); 
            width: 90%; 
            max-width: 480px; 
            text-align: center;
        }

        h2 { color: #2d3436; margin: 0 0 5px 0; font-weight: 800; letter-spacing: -0.5px; }
        p.sub-title { color: #636e72; font-size: 14px; margin-bottom: 25px; }
        
        label { font-weight: 700; display: block; margin-top: 20px; color: #2d3436; text-align: left; font-size: 14px; }
        
        /* √î NH·∫¨P LI·ªÜU */
        .input-group { position: relative; display: flex; align-items: center; }
        
        input { 
            width: 100%; 
            padding: 14px 15px; 
            margin-top: 8px; 
            border: 2px solid #dfe6e9; 
            border-radius: 10px; 
            box-sizing: border-box; 
            font-size: 15px; 
            transition: 0.3s; 
            outline: none;
        }
        input:focus { border-color: #6c5ce7; box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1); }
        
        /* N√öT X√ìA (X) */
        .clear-btn { 
            position: absolute; 
            right: 10px; 
            top: 55%; 
            transform: translateY(-50%);
            background: #ff7675; 
            color: white; 
            border: none; 
            border-radius: 50%; 
            width: 24px; 
            height: 24px; 
            cursor: pointer; 
            font-size: 12px; 
            display: flex; 
            justify-content: center; 
            align-items: center;
            opacity: 0.8;
        }
        .clear-btn:hover { opacity: 1; }

        /* N√öT SAO CH√âP */
        .copy-btn { 
            width: 100%; 
            padding: 12px; 
            margin-top: 10px; 
            background: #00b894; 
            color: white; 
            border: none; 
            border-radius: 10px; 
            font-weight: 700; 
            cursor: pointer; 
            transition: 0.2s; 
            font-size: 15px;
        }
        .copy-btn:hover { background: #00cec9; transform: translateY(-2px); }

        /* N√öT QUICK LINK (M√ÄU T√çM) */
        .quick-btn { 
            width: 100%; 
            padding: 14px; 
            margin-top: 15px; 
            background: linear-gradient(135deg, #6c5ce7, #a29bfe); 
            color: white; 
            border: none; 
            border-radius: 10px; 
            font-weight: 700; 
            cursor: pointer; 
            font-size: 15px;
            display: flex; 
            justify-content: center; 
            align-items: center; 
            gap: 10px;
            text-decoration: none; 
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
            transition: 0.3s;
            box-sizing: border-box;
        }
        .quick-btn:hover { transform: translateY(-3px); box-shadow: 0 8px 20px rgba(108, 92, 231, 0.4); }

        /* K·∫æT QU·∫¢ */
        .result-box { 
            margin-top: 25px; 
            padding: 20px; 
            background: #f8f9fa; 
            border-radius: 12px; 
            border: 1px dashed #b2bec3; 
            display: none; 
            text-align: left;
            word-wrap: break-word; 
        }
        .link-text { 
            color: #d63031; 
            font-weight: 600; 
            font-size: 13px; 
            margin-bottom: 5px; 
            display: block; 
            font-family: 'Consolas', monospace; 
            background: #fff;
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #dfe6e9;
        }

        hr { border: 0; border-top: 1px dashed #dfe6e9; margin: 20px 0; }
    </style>
</head>
<body>

    <div class="card">
        <div style="font-size: 40px; margin-bottom: 10px;">üõ†Ô∏è</div>
        <h2>M√ÅY T·∫†O LINK V3.2</h2>
        <p class="sub-title">H·ªá th·ªëng V11 + Link4M Quick Link</p>
        
        <label><i class="fas fa-link"></i> D√°n link g·ªëc (Drive/Fshare):</label>
        <div class="input-group">
            <input type="text" id="linkInput" placeholder="V√≠ d·ª•: https://drive.google.com/..." oninput="taoLink()">
            <button class="clear-btn" onclick="xoaLink()" title="X√≥a">‚úï</button>
        </div>

        <div id="ketQua" class="result-box">
            <label style="margin-top:0; color:#00b894;"><i class="fas fa-check-circle"></i> Link H·ªá Th·ªëng (V11):</label>
            <span id="linkOutput" class="link-text"></span>
            <button class="copy-btn" onclick="copyText()"><i class="far fa-copy"></i> Sao Ch√©p Link N√†y</button>

            <hr>

            <label style="color:#6c5ce7; margin-top:0;"><i class="fas fa-money-bill-wave"></i> T·∫°o Link Ki·∫øm Ti·ªÅn (Link4M):</label>
            <p style="font-size: 13px; color: #636e72; margin: 5px 0 15px 0;">B·∫•m n√∫t d∆∞·ªõi ƒë·ªÉ m·ªü trang t·∫°o link nhanh:</p>
            
            <a id="btnQuickLink" href="#" target="_blank" class="quick-btn">
                <i class="fas fa-bolt"></i> R√öT G·ªåN KI·∫æM TI·ªÄN NGAY
            </a>
        </div>
    </div>

    <script>
        // TOKEN C·ª¶A B·∫†N (GI·ªÆ NGUY√äN)
        const API_TOKEN = "67b810f67e172c3e986014e3"; 

        function taoLink() {
            let linkGoc = document.getElementById("linkInput").value.trim();
            
            // X√≥a link n·∫øu √¥ nh·∫≠p tr·ªëng
            if (linkGoc.length < 5) {
                document.getElementById("ketQua").style.display = "none";
                return;
            }

            // 1. T·∫°o link h·ªá th·ªëng (V11)
            // M√£ h√≥a base64
            let linkMaHoa = btoa(linkGoc);
            
            // L·∫•y ƒë∆∞·ªùng d·∫´n th∆∞ m·ª•c hi·ªán t·∫°i (b·ªè admin.html)
            let trangChu = window.location.href.replace("admin.html", "");
            
            // X√≥a d·∫•u / ·ªü cu·ªëi n·∫øu c√≥
            if(trangChu.endsWith("/")) trangChu = trangChu.slice(0, -1);
            
            // Gh√©p th√†nh link ho√†n ch·ªânh
            let linkHeThong = trangChu + "/?id=" + linkMaHoa;

            // Hi·ªÉn th·ªã ra m√†n h√¨nh
            document.getElementById("linkOutput").innerText = linkHeThong;
            document.getElementById("ketQua").style.display = "block";

            // 2. T·∫°o Quick Link cho Link4M
            let quickLink = `https://link4m.co/st?api=${API_TOKEN}&url=${encodeURIComponent(linkHeThong)}`;
            
            // G√°n link v√†o n√∫t m√†u t√≠m
            document.getElementById("btnQuickLink").href = quickLink;
        }

        function copyText() {
            let text = document.getElementById("linkOutput").innerText;
            navigator.clipboard.writeText(text);
            
            let btn = document.querySelector('.copy-btn');
            let oldHTML = btn.innerHTML;
            
            btn.innerHTML = "<i class='fas fa-check'></i> ƒê√£ Copy!";
            btn.style.background = "#2d3436";
            
            setTimeout(() => { 
                btn.innerHTML = oldHTML; 
                btn.style.background = "#00b894";
            }, 2000);
        }

        function xoaLink() {
            document.getElementById("linkInput").value = "";
            document.getElementById("ketQua").style.display = "none";
            document.getElementById("linkInput").focus();
        }
    </script>
</body>
</html>
